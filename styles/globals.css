/* styles/globals.css - 清理后的水质监测Dashboard样式主入口 */

/* 导入所有优化的模块化样式文件 */
@import url('./base.css');         /* 优化的基础样式、重置和响应式 */
@import url('./layout.css');       /* 优化的头部、页脚和主要布局 */
@import url('./components.css');   /* 优化的卡片、按钮等组件样式 */
@import url('./forms-modals.css'); /* 优化的表单、弹窗和交互式组件 */

/* ==================== 全局优化样式 ==================== */

/* 滚动条美化 */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 3px;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

/* 选择文本样式 */
::selection {
  background: rgba(102, 126, 234, 0.3);
  color: white;
}

::-moz-selection {
  background: rgba(102, 126, 234, 0.3);
  color: white;
}

/* 焦点样式优化 */
*:focus {
  outline: 2px solid rgba(102, 126, 234, 0.5);
  outline-offset: 2px;
}

/* 特定元素的焦点样式重置 */
button:focus, 
input:focus, 
select:focus,
textarea:focus {
  outline: 2px solid rgba(102, 126, 234, 0.6);
  outline-offset: 1px;
}

/* 移除默认的焦点样式，但保持可访问性 */
button:focus:not(:focus-visible),
input:focus:not(:focus-visible),
select:focus:not(:focus-visible) {
  outline: none;
}

/* 性能优化 */
* {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* 为现代浏览器添加硬件加速 */
.parameter-card,
.overview-card,
.header {
  will-change: transform;
  transform: translateZ(0);
}

/* ==================== 用户偏好设置适配 ==================== */

/* 减少动画对于喜欢减少动画的用户 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms;
    animation-iteration-count: 1;
    transition-duration: 0.01ms;
    scroll-behavior: auto;
  }
  
  /* 特殊情况：保持必要的过渡效果 */
  .header-action-btn:hover,
  .parameter-card:hover {
    transition: none;
  }
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  .parameter-card {
    border-width: 2px;
    border-color: rgba(255, 255, 255, 0.8);
  }
  
  .header-action-btn {
    border-width: 2px;
    border-color: rgba(255, 255, 255, 0.8);
  }
  
  .status-dot {
    border: 2px solid white;
  }
  
  /* 增强文本对比度 */
  .parameter-card .description,
  .parameter-card .reference {
    opacity: 1;
    color: rgba(255, 255, 255, 0.95);
  }
}

/* 暗色模式偏好（如果用户系统设置为暗色） */
@media (prefers-color-scheme: dark) {
  /* 当前设计已经是暗色主题，这里可以做微调 */
  .parameter-card {
    background: rgba(255, 255, 255, 0.12);
  }
  
  .overview-card {
    background: rgba(255, 255, 255, 0.12);
  }
}

/* ==================== 打印样式优化 ==================== */
@media print {
  /* 隐藏不需要打印的元素 */
  .header,
  .footer,
  .header-action-btn,
  .modal-overlay,
  .tooltip,
  .info-icon {
    display: none;
  }
  
  /* 打印时的主体样式 */
  body {
    background: white;
    color: #333;
    font-size: 12pt;
    line-height: 1.4;
  }
  
  /* 卡片打印样式 */
  .parameter-card {
    break-inside: avoid;
    box-shadow: none;
    border: 1px solid #333;
    background: white;
    color: #333;
    margin-bottom: 0.5cm;
    padding: 0.5cm;
  }
  
  .overview-card {
    break-inside: avoid;
    background: white;
    border: 1px solid #333;
    margin-bottom: 0.5cm;
  }
  
  /* 确保重要信息在打印时可见 */
  .card-title-section h3,
  .value .number,
  .status-value {
    color: #000;
    font-weight: bold;
  }
  
  /* 打印时的页面布局 */
  .main .container {
    max-width: 100%;
    padding: 0;
  }
  
  .core-params-row {
    grid-template-columns: repeat(2, 1fr);
    gap: 0.5cm;
  }
  
  /* 打印分页控制 */
  .overview-card {
    page-break-after: avoid;
  }
  
  .parameter-card:nth-child(2n) {
    page-break-after: avoid;
  }
}

/* ==================== 特殊浏览器兼容性 ==================== */

/* Safari 特殊处理 */
@supports (-webkit-backdrop-filter: blur(10px)) {
  .parameter-card,
  .overview-card,
  .header {
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
  }
}

/* Firefox 特殊处理 */
@-moz-document url-prefix() {
  .parameter-card {
    background: rgba(255, 255, 255, 0.18);
  }
}

/* ==================== 输入法和国际化支持 ==================== */

/* 中文字体优化 */
:lang(zh-CN) {
  font-family: 'Inter', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
}

/* 日文字体优化 */
:lang(ja) {
  font-family: 'Inter', 'Hiragino Kaku Gothic Pro', 'Meiryo', sans-serif;
}

/* RTL 语言支持（阿拉伯语、希伯来语等） */
[dir="rtl"] .parameter-card {
  direction: rtl;
  text-align: right;
}

[dir="rtl"] .card-icon {
  margin-left: 0.75rem;
  margin-right: 0;
}

/* ==================== 错误处理和降级 ==================== */

/* CSS Grid 不支持时的降级 */
@supports not (display: grid) {
  .core-params-row {
    display: flex;
    flex-wrap: wrap;
  }
  
  .parameter-card {
    flex: 1 1 calc(25% - 1rem);
    margin: 0.5rem;
  }
  
  @media (max-width: 1000px) {
    .parameter-card {
      flex: 1 1 calc(50% - 1rem);
    }
  }
  
  @media (max-width: 480px) {
    .parameter-card {
      flex: 1 1 100%;
    }
  }
}

/* Flexbox 不支持时的最终降级 */
@supports not (display: flex) {
  .core-params-row {
    display: block;
  }
  
  .parameter-card {
    display: inline-block;
    width: 23%;
    vertical-align: top;
    margin: 1%;
  }
  
  @media (max-width: 480px) {
    .parameter-card {
      display: block;
      width: 100%;
      margin: 0.5rem 0;
    }
  }
}